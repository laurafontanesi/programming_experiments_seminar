<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Events in a trial (feedback)</title>

<script src="site_libs/header-attrs-2.17/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Inquisit seminar</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Syllabus</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-desktop"></span>
     
    WPAs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="wpa1.html">1 - experimental design</a>
    </li>
    <li>
      <a href="wpa2.html">2 - intro to Inquisit</a>
    </li>
    <li>
      <a href="wpa3.html">3 - Inquisit basics</a>
    </li>
    <li>
      <a href="wpa4.html">4 - feedback</a>
    </li>
    <li>
      <a href="wpa5.html">5 - conditional updating and branching</a>
    </li>
    <li>
      <a href="wpa6.html">6 - within-subjects manipulation</a>
    </li>
    <li>
      <a href="wpa7.html">7 - within-subjects conditional branching</a>
    </li>
    <li>
      <a href="wpa8.html">8 - across-subject manipulation</a>
    </li>
    <li>
      <a href="wpa9.html">9 - final assignment</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-display-arrow-down"></span>
     
    Solutions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="wpa3_answers.html">3 - Inquisit basics</a>
    </li>
    <li>
      <a href="wpa4_answers.html">4 - feedback</a>
    </li>
    <li>
      <a href="wpa5_answers.html">5 - conditional updating and branching</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Events in a trial (feedback)</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#feedback" id="toc-feedback">Feedback</a>
<ul>
<li><a href="#a-new-script" id="toc-a-new-script">A new script</a></li>
<li><a href="#define-the-choice-stimuli"
id="toc-define-the-choice-stimuli">1. Define the choice stimuli</a></li>
<li><a href="#define-the-trials" id="toc-define-the-trials">2. Define
the Trials</a></li>
<li><a href="#define-the-block-and-experiment"
id="toc-define-the-block-and-experiment">3. Define the Block and
Experiment</a></li>
<li><a href="#testing-the-code" id="toc-testing-the-code">Testing the
code</a></li>
<li><a href="#final-message" id="toc-final-message">4. Final
message</a></li>
</ul></li>
<li><a href="#difference-between-variables-and-parameters-clarification"
id="toc-difference-between-variables-and-parameters-clarification">Difference
between variables and Parameters (clarification)</a></li>
<li><a href="#send-me-your-assignments"
id="toc-send-me-your-assignments">Send me your assignments</a></li>
</ul>
</div>

<p>In last week’s task, the trial structure was relatively simple:
Participants were shown a text stimulus and were asked to choose between
two gambles. We later added a text to remind participants of which keys
they could press to express their choice, as well as a “Get ready” text
at the beginning of each trial.</p>
<p>Now, we explore slightly more complex trial structures.</p>
<p>In particular, we will focus on the <strong>feedback</strong> today
and on <strong>conditional branching</strong> next week.</p>
<div id="feedback" class="section level2">
<h2>Feedback</h2>
<p>Feedback is quite common both in perceptual and in value-based
decision tasks. It can have a specific function (e.g., to drive
learning) or is used simply to notify that a response was recorded and
the trial is over (people like to receive feedback, and can be thus used
as motivator).</p>
<p>Today, we are going to use the stimuli for a categorization task,
taken from <a
href="https://doi.org/10.1111/j.1467-9280.2008.02219.x">Spiering &amp;
Ashby (2008)</a>. You can download them using this <a
href="https://www.dropbox.com/sh/6fa8w54tz9eib5z/AACxvu6hs6cLNL8fAgo91gZNa?dl=0">Dropbox
link</a>.</p>
<p><img src="wpa4_categories.png" width="50%" style="display: block; margin: auto;" /></p>
<p>In this task, participants learn to categorize these 30 patches
(visual stimuli that vary across trials in bar width and bar
orientation) into 2 categories, A and B (the boundaries of which are
denoted by the thick line in the figure), by trial and error. The
feedback of “correct” and “incorrect” is provided after each choice and
guides learning in the subsequent trials.</p>
<div id="a-new-script" class="section level3">
<h3>A new script</h3>
<p>Create a new Inquisit script file and name it
<code>wpa_4_FirstLast.iqx</code> (with your First and Last name). This
is the file you will email me at the end of the class.</p>
<p>Now that you have a script file, define a defaults element at the
beginning of the file (as you did in WPA3).</p>
</div>
<div id="define-the-choice-stimuli" class="section level3">
<h3>1. Define the choice stimuli</h3>
<p>Just like we used the <code>item</code> element to define our text
strings last week, we can use the <code>item</code> element this week to
load our image files. The way we do this is by specifying the filepath
for each image, where we specified the text string last week. This
filepath is <strong>from the location your Inquisit script is saved
in</strong>. Therefore, if your image files are saved in the same
location as your <code>.iqx</code> file, you just have to give the file
name. For example:</p>
<pre><code>&lt;item example&gt;  
/1=&quot;patch1.png&quot; 
/2=&quot;patch2.png&quot; 
&lt;/item&gt;</code></pre>
<p>Otherwise, if they are in a sub-folder named for example
“stimuli_wpa4”, you will write:</p>
<pre><code>&lt;item example&gt;  
/1=&quot;stimuli_wpa4/patch1.png&quot; 
/2=&quot;stimuli_wpa4/patch2.png&quot; 
&lt;/item&gt;</code></pre>
<p>An alternative to this method is to <a
href="https://www.millisecond.com/forums/Topic19045.aspx">load stimuli
lists from a text file</a>. I prepared a stimulus list text file in the
folder, in case you’d like to try that out.</p>
<p>Last week we had a single item element. Now we have two categories of
stimuli, category A and category B. In our design, we need to be able to
provide feedback to participants on whether they were correct or not
during the training phase of the Experiment. This means that we need to
be able to tell Inquisit which category each item is in, so that it can
provide the appropriate feedback based on the participants response.
This requires two separate stimuli lists, for A and B items.</p>
<p><strong>Exercise 1a</strong>: Create your stimuli lists. Give each
list an informative name (e.g., <code>stimlistA</code> and
<code>stimlistB</code>).</p>
<p>Just like with the text elements, now that we have defined our
stimuli, we need to specify how they should look when displayed on the
screen. Because our stimuli are pictures, not text, we can do this by
defining a <code>picture</code> element. This element has an
<code>items</code> attribute and a <code>select</code> attribute, just
like the <code>text</code> element, as well as attributes for defining
location, size etc.</p>
<p><strong>Exercise 1b</strong>: Based on your <code>text</code> code
from last week, create the appropriate <code>picture</code> elements, so
that the stimuli are displayed in the center of the screen (use the help
function if you want a reminder on what the position, items, and select
attributes do). You can also change other attributes of the image being
displayed. I recommend changing the size of the image as well.</p>
<p>NOTE: We need as many picture elements as we have item elements, even
though all pictures will be displayed in the same way.</p>
</div>
<div id="define-the-trials" class="section level3">
<h3>2. Define the Trials</h3>
<p><strong>Exercise 2a</strong>: Create a trial element for each of our
stimuli types, similar to the ones from last week. The valid responses
for all elements should be <code>a</code> and <code>b</code>.</p>
<p>In the paper, there is a break of 1500ms between each trial. Build
this into your trial elements. Last week we controlled how much time
there was between each trial by using the <code>stimulustimes</code>
attribute of the trial element. This is useful if we want to display
something during that time (for example: a warning to get ready, or a
fixation cross). However, we can also explicitly tell Inquisit to pause
between trials, using either the <code>pretrialpause</code> attribute or
the <code>posttrialpause</code> attribute. The first of these prepares
the trial, but then waits the designated time before beginning it. This
can be advantageous if it takes Inquisit some time to prepare the next
trial (e.g., it has to load large stimuli, or do calculations), because
it ensures that their is a consistent time gap between trials.</p>
<p><strong>Exercise 2b</strong>: Try setting the pause between trials of
1500 ms using <code>pretrialpause</code>.</p>
<p>Now we have to tell Inquisit what counts as the correct response on
each trial.</p>
<p><strong>Exercise 2c</strong>: Look at the help file for the trial
element, and see if you can work out how to set the correct response for
each trial type.</p>
<p>Inquisit can display information that is dependent on participants’
choices in several ways. The simplest is to display a message based on
the response they gave. There are 3 main message attributes,
<code>correctmessage</code>, <code>errormessage</code> and
<code>responsemessage</code>. We will use the first 2. Each of these,
takes two pieces of information: the name of the stimulus that is
displayed as the message, and the length of time for which it should be
displayed.</p>
<p>This means that we need to create some stimuli for Inquisit to
display. We’ll just create text stimuli for both messages. When they get
a category right, I want to display the word <strong>Correct!</strong>
in large font colored blue, when they get the category wrong, it should
display <strong>Incorrect!</strong> in red instead.</p>
<p><strong>Exercise 2d</strong>: Create the <code>text</code> elements
to do this. Then, use the <code>correctmessage</code> and
<code>errormessage</code> attributes to tell each trial how to use these
two <code>text</code> stimuli. You’ll need to do this for each trial
type.</p>
</div>
<div id="define-the-block-and-experiment" class="section level3">
<h3>3. Define the Block and Experiment</h3>
<p>For simplicity, we will just have 1 block of 30 trials, where we
randomize the category A and B stimuli.</p>
<p><strong>Exercise 3a</strong>: Create 1 block and 1 experiment
elements. To find out how to randomly select from 2 trial types, check
the examples in the Inquisit help page for the block element.</p>
</div>
<div id="testing-the-code" class="section level3">
<h3>Testing the code</h3>
<p>Congratulations, you should now have a working Experiment. Try it out
before you attempt the rest of the Exercises.</p>
</div>
<div id="final-message" class="section level3">
<h3>4. Final message</h3>
<p>Now that you have a working experiment and you have gone through it
once, you can check the data output. You should see a
<code>correct</code> column, which is 0 when the response was incorrect
and 1 when the response was correct.</p>
<p>We now want to summarize participants’ performance and show it at the
end of the experiment in a text message.</p>
<p>For this purpose, we need to introduce the <code>values</code>
element, which contains custom variables that can be retrieved and
updated throughout the course of a script.</p>
<p><strong>Exercise 4a</strong>: Create a variable inside the values
element, call it <code>accuracy</code> and set it at an initial value of
50.</p>
<p>Now we need to update such variable after each trial, to reflect the
performance up to that point. First, the trial element has 2 attributes
called <code>ontrialend</code> and <code>ontrialbegin</code>, inside
which we can specify operations that we want to be performed before or
after each trial. In this case, we will use the <code>ontrialend</code>
attribute alone. Second, each trial object already has a few values
attached to it that can be “called” for various computations, as well as
directly added as a column in the output data.</p>
<p><strong>Exercise 4b</strong>: Within the squared brackets of the
<code>ontrialend</code> attribute of trial A, type the label of that
trial, followed by a dot, and press the tab key. You should be able to
see now all the values that are attached to that object. Look for one
that represents the percentage of correct responses and press enter.
Now, within the squared brackets, redefine the accuracy variable to this
value (to assign a value to a variable, use the notation:
<code>variable = value</code>). <strong>NOTE</strong>: if you only use
the percentage of correct recorded by the same trial, the final
percentage correct which will be displayed will be the performance in
the final trial category that the participant saw. Therefore, we need to
calculate the average between the average performance in trial A and B
to define the <code>values.accuracy</code> variable. Be sure that you do
the same in both trial types.</p>
<p>Finally, we need to create a page, using the <code>page</code>
element, that shows the final value of the accuracy variable:</p>
<pre><code>&lt;page final_message&gt;
Congratulations!

^^ You finished the experiment.

^^ You maintaned a performance of &lt;%values.accuracy%&gt; percent.
&lt;/page&gt;</code></pre>
<p>The page element is used to define simple pages of text to be
displayed as instructions using the <code>preinstructions</code> or
<code>postinstructions</code> attribute (you can use these both at the
block and experiment level). Tab and space characters occuring within
the page definition will also appear in the instruction page as
displayed. Line breaks, however, are stripped out prior to display. To
force a line break, use the special character “^”.</p>
<p>The current value of a given measure for a given trial or block (as
well as custom values, as in our case) can be inserted anywhere within
the text of an instruction page by specifying the type of element,
element’s name, and the name of the measure
(<code>&lt;% type.name.property %&gt;</code>) or in case of a custom
variable by specifying values and the name of the variable
(<code>&lt;%values.accuracy%&gt;</code>).</p>
<p><strong>Exercise 4c</strong>: Add this page at the end of the block,
using the <code>postinstructions</code> attribute.</p>
<p>Inquisit provides built-in support for reporting accuracy, latency
and response window measures at the end of a block of trials using the
<code>blockfeedback</code> attribute (find it in the Inquisit Help).</p>
<p><strong>Exercise 4d</strong>: Use the <code>blockfeedback</code>
attribute instead of our custom page to show the percentage of correct
responses at the end of the block.</p>
</div>
</div>
<div id="difference-between-variables-and-parameters-clarification"
class="section level2">
<h2>Difference between variables and Parameters (clarification)</h2>
<p>Today, we mentioned two new element types in Inquisit,
<strong>variables</strong> and <strong>parameters</strong>.</p>
<p>We use <strong>parameters</strong> to fix some values at the
beginning of the script that we would then use multiple times throughout
the script. For example:</p>
<pre><code>&lt;parameters&gt;
/ pictures_size = 30%
/ pictures_position = 50%
&lt;/parameters&gt;

&lt;picture A&gt;
/ items = stimlistA
/ select = noreplace
/ position = (parameters.pictures_position, parameters.pictures_position)
/ size = (parameters.pictures_size, parameters.pictures_size)
&lt;/picture&gt;

&lt;picture B&gt;
/ items = stimlistB
/ select = noreplace
/ position = (parameters.pictures_position, parameters.pictures_position)
/ size = (parameters.pictures_size, parameters.pictures_size)
&lt;/picture&gt;</code></pre>
<p>On the other hand, we use <strong>values</strong> to define variables
whose values changed throughout the script (as accuracy in today’s
task).</p>
</div>
<div id="send-me-your-assignments" class="section level2">
<h2>Send me your assignments</h2>
<p>You can send your assignment to my email address: <a
href="mailto:laura.fontanesi@unibas.ch"
class="email">laura.fontanesi@unibas.ch</a>.</p>
<p>For this assignment, please send me the Inquisit script. If you want
to add comments, you can do that by adding the hashtag <code>#</code> at
the beginning of the line.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
